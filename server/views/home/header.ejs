<div id="navMenu">
    <a id="homeBtn" href="/">Mystery blog</a>
    <input id="blogSearchInput" type="text" onkeypress="searchBlog(event)">
    <button id="filterBtn" onclick="showFilterMenu()">Filters</button>
    <button id="newBlogBtn" onclick="window.location.href = '/edit/new'">New blog</button>
</div>
<%- include("../addons/filterMenu.ejs") %>
<script>
    var blogSearch = '<%= blogSearch ? blogSearch : "" %>';
    var activeFilters = '<%= activeFilters %>';

    document.getElementById("blogSearchInput").value = blogSearch;

    function showFilterMenu() {
        var filterMenu = document.getElementById("filterMenu");
        filterMenu.style.display = (filterMenu.style.display === "flex") ? "none" : "flex";
    }

    function addFilter(filter) {
        activeFilters[filter] = 1;
    }

    function searchBlog(e) {
        if (e.key === "Enter") {
            blogSearch = document.getElementById("blogSearchInput").value;
            search();
        }
    }

    function search() {
        var filtersString = JSON.stringify(activeFilters);
        window.location.href = `/{search=${blogSearch}, filters=${filtersString}}`;
    }
</script>
